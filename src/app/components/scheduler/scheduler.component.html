<div class="calendar-container">
  <div class="calendar">
    <div class="calendar-headline">
      <div class="calendar-headline-month" (click)="onOpenMonthSelector()">
        {{ firstDayOfActiveMonth().setLocale("uk").toFormat("LLLL") }},
        {{ firstDayOfActiveMonth().year }}
      </div>

      <div class="calendar-headline-controls">
        <div class="calendar-headline-control" (click)="onPreviousMonth()">
          «
        </div>
        <div
          class="calendar-headline-control calendar-headline-control-today"
          (click)="onToday()"
        >
          Сьогодні
        </div>
        <div class="calendar-headline-control" (click)="onNextMonth()">»</div>
      </div>
    </div>
    <div class="calendar-weeks-grid">
      <div
        *ngFor="let weekDay of weekDays(); trackBy: trackByIndex"
        class="calendar-weeks-grid-cell"
      >
        {{ weekDay }}
      </div>
    </div>
    <div class="calendar-grid">
      <div
        *ngFor="let dayOfMonth of daysOfMonth; trackBy: trackByIndex"
        [ngClass]="{
          'calendar-grid-cell': true,
          'calendar-grid-cell-active':
            activeDay()?.toISODate() === dayOfMonth.date.toISODate(),
          'calendar-grid-cell-inactive':
            dayOfMonth.date.month !== firstDayOfActiveMonth().month
        }"
        (click)="activeDay.set(dayOfMonth.date)"
      >
        <div
          *ngIf="dayOfMonth.post[0]; else noPostImage"
          class="bg-container"
          [style.backgroundImage]="
            'linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url(' +
            dayOfMonth.post[0].imgUrl +
            ')'
          "
          (click)="scrollToElByClick()"
        >
          {{ dayOfMonth.date.day }}
        </div>
        <ng-template #noPostImage>
          {{ dayOfMonth.date.day }}
        </ng-template>
      </div>
    </div>
  </div>
  <div class="schedule">
    <div class="schedule-headline">
      <div class="date-subtitle" *ngIf="activeDay()">
        {{ activeDay()?.toLocaleString(DATE_MED) }}
      </div>
      <app-scheduler-post
        [activeDay]="activeDay"
        [activeDayPost]="activeDayPost"
      ></app-scheduler-post>
    </div>
  </div>
</div>
